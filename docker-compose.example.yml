version: "3.8"

services:
  dashboard:
    build: .
    command: python3 /app/dashboard.py
    environment:
      # Altere estas credenciais em produção!
      DASHBOARD_USER: admin
      DASHBOARD_PASSWORD: admin123
      DASHBOARD_SECRET_KEY: change-me-in-production-$(openssl rand -hex 16)
    volumes:
      - ./config:/app/config:rw
      - ./video:/app/video:ro
      - ./logs:/app/logs:rw
      - ./control:/app/control:rw
      - ./stats:/app/stats:rw
    ports:
      - "5000:5000"
    depends_on:
      - cozy
      - dracco

  cozy:
    build: .
    environment:
      CHANNEL_NAME: cozy
    volumes:
      - ./config:/app/config:rw
      - ./musicas_cozy:/app/musicas:ro
      - ./video:/app/video:ro
      - ./logs:/app/logs:rw
      - ./control:/app/control:rw
      - ./stats:/app/stats:rw
    ports:
      - "8081:8080"

  dracco:
    build: .
    environment:
      CHANNEL_NAME: dracco
    volumes:
      - ./config:/app/config:rw
      - ./musicas_dracco:/app/musicas:ro
      - ./video:/app/video:ro
      - ./logs:/app/logs:rw
      - ./control:/app/control:rw
      - ./stats:/app/stats:rw
    ports:
      - "8082:8080"

